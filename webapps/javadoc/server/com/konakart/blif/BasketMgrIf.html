<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jan 31 11:20:39 GMT 2018 -->
<title>BasketMgrIf (KonaKart Server Engine API Documentation)</title>
<meta name="date" content="2018-01-31">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BasketMgrIf (KonaKart Server Engine API Documentation)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/konakart/blif/AdminEngineMgrIf.html" title="interface in com.konakart.blif"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/konakart/blif/BillingMgrIf.html" title="interface in com.konakart.blif"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/konakart/blif/BasketMgrIf.html" target="_top">Frames</a></li>
<li><a href="BasketMgrIf.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.konakart.blif</div>
<h2 title="Interface BasketMgrIf" class="title">Interface BasketMgrIf</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../com/konakart/bl/BasketMgr.html" title="class in com.konakart.bl">BasketMgr</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">BasketMgrIf</span></pre>
<div class="block">BasketMgrIf
 
 Interface which an implementation of this manager must adhere to.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#addToBasket(java.lang.String,%20int,%20com.konakart.appif.BasketIf)">addToBasket</a></strong>(java.lang.String&nbsp;sessionId,
           int&nbsp;customerId,
           <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)</code>
<div class="block">Determines the customerId to use and calls the private method with the customerId.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#addToBasketWithOptions(java.lang.String,%20int,%20com.konakart.appif.BasketIf,%20com.konakart.appif.AddToBasketOptionsIf)">addToBasketWithOptions</a></strong>(java.lang.String&nbsp;sessionId,
                      int&nbsp;customerId,
                      <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item,
                      <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">If options is set to null, this method is identical to addToBasket().</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#createEncodedProduct(int,%20com.konakart.appif.OptionIf[])">createEncodedProduct</a></strong>(int&nbsp;productId,
                    <a href="../../../com/konakart/appif/OptionIf.html" title="interface in com.konakart.appif">OptionIf</a>[]&nbsp;opts)</code>
<div class="block">Create the encoded product The customers_basket table contains a products_id field which is
 encoded like this : 1{3}6{4}3 which means product of id==1 with product_options of id==3 and
 product_options_values of id==6 followed by product_options of id==4 and
 product_options_values of id==3.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#findOptionInProduct(com.konakart.appif.ProductIf,%20com.konakart.app.Option)">findOptionInProduct</a></strong>(<a href="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</a>&nbsp;p,
                   <a href="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</a>&nbsp;o)</code>
<div class="block">The basket object must have a populated product object with options.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#getBasketItemsPerCustomer(java.lang.String,%20int,%20int)">getBasketItemsPerCustomer</a></strong>(java.lang.String&nbsp;sessionId,
                         int&nbsp;customerId,
                         int&nbsp;languageId)</code>
<div class="block">Get the basket items for a customer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#getBasketItemsPerCustomerWithOptions(java.lang.String,%20int,%20int,%20com.konakart.appif.AddToBasketOptionsIf)">getBasketItemsPerCustomerWithOptions</a></strong>(java.lang.String&nbsp;sessionId,
                                    int&nbsp;customerId,
                                    int&nbsp;languageId,
                                    <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">Get the basket items for a customer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#getOptsForBasketItem(com.konakart.app.Basket,%20int,%20int,%20com.konakart.appif.AddToBasketOptionsIf)">getOptsForBasketItem</a></strong>(<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;item,
                    int&nbsp;priceId,
                    int&nbsp;languageId,
                    <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;a2bOptions)</code>
<div class="block">The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#mergeBaskets(java.lang.String,%20int)">mergeBaskets</a></strong>(java.lang.String&nbsp;sessionId,
            int&nbsp;customerFromId)</code>
<div class="block">Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#mergeBasketsWithOptions(java.lang.String,%20int,%20com.konakart.appif.AddToBasketOptionsIf)">mergeBasketsWithOptions</a></strong>(java.lang.String&nbsp;sessionId,
                       int&nbsp;customerFromId,
                       <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#populateOptsForBasketItem(com.konakart.app.Basket,%20int,%20int,%20com.konakart.appif.AddToBasketOptionsIf)">populateOptsForBasketItem</a></strong>(<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;item,
                         int&nbsp;priceId,
                         int&nbsp;languageId,
                         <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;a2bOptions)</code>
<div class="block">The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#removeBasketItemsPerCustomer(java.lang.String,%20int)">removeBasketItemsPerCustomer</a></strong>(java.lang.String&nbsp;sessionId,
                            int&nbsp;customerId)</code>
<div class="block">We determine which customerId to use and then delete all basket items that exist for this
 customer by calling the private method.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#removeFromBasket(java.lang.String,%20int,%20com.konakart.appif.BasketIf)">removeFromBasket</a></strong>(java.lang.String&nbsp;sessionId,
                int&nbsp;customerId,
                <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)</code>
<div class="block">We must remove the customers_basket record and any associated customers_basket_attributes
 records.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#updateBasket(java.lang.String,%20int,%20com.konakart.appif.BasketIf)">updateBasket</a></strong>(java.lang.String&nbsp;sessionId,
            int&nbsp;customerId,
            <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)</code>
<div class="block">If the sessionId is null, we check the customerId to ensure that it is negative.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#updateBasketWithOptions(java.lang.String,%20int,%20com.konakart.appif.BasketIf,%20com.konakart.appif.AddToBasketOptionsIf)">updateBasketWithOptions</a></strong>(java.lang.String&nbsp;sessionId,
                       int&nbsp;customerId,
                       <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item,
                       <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">If the sessionId is null, we check the customerId to ensure that it is negative.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#updateBasketWithStockInfo(com.konakart.appif.BasketIf[])">updateBasketWithStockInfo</a></strong>(<a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>[]&nbsp;basketItems)</code>
<div class="block">Receives an array of basket items and updates each one with the current stock level.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/BasketMgrIf.html#updateBasketWithStockInfoWithOptions(com.konakart.appif.BasketIf[],%20com.konakart.appif.AddToBasketOptionsIf)">updateBasketWithStockInfoWithOptions</a></strong>(<a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>[]&nbsp;basketItems,
                                    <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">Receives an array of basket items and updates each one with the current stock level.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getBasketItemsPerCustomer(java.lang.String, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBasketItemsPerCustomer</h4>
<pre><a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]&nbsp;getBasketItemsPerCustomer(java.lang.String&nbsp;sessionId,
                                 int&nbsp;customerId,
                                 int&nbsp;languageId)
                                   throws java.lang.Exception</pre>
<div class="block">Get the basket items for a customer. We determine which customerId to use and then call the
 private method. Although we read the final_price from the db, we set it through a calculation
 since OsCommerce doesn't store this in the DB. We do store it in the DB but never use it
 directly from the DB.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd><dd><code>customerId</code> - </dd><dd><code>languageId</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns an array of Basket Items</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="getBasketItemsPerCustomerWithOptions(java.lang.String, int, int, com.konakart.appif.AddToBasketOptionsIf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBasketItemsPerCustomerWithOptions</h4>
<pre><a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]&nbsp;getBasketItemsPerCustomerWithOptions(java.lang.String&nbsp;sessionId,
                                            int&nbsp;customerId,
                                            int&nbsp;languageId,
                                            <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)
                                              throws java.lang.Exception</pre>
<div class="block">Get the basket items for a customer. We determine which customerId to use and then call the
 private method. Although we read the final_price from the db, we set it through a calculation
 since OsCommerce doesn't store this in the DB. We do store it in the DB but never use it
 directly from the DB.
 
 If options is set to null then this call is identical to getBasketItemsPerCustomer(). The
 options may determine from where we read the price and quantity of the basket items.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd><dd><code>customerId</code> - </dd><dd><code>languageId</code> - </dd><dd><code>options</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns an array of Basket Items</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="addToBasketWithOptions(java.lang.String, int, com.konakart.appif.BasketIf, com.konakart.appif.AddToBasketOptionsIf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addToBasketWithOptions</h4>
<pre>int&nbsp;addToBasketWithOptions(java.lang.String&nbsp;sessionId,
                         int&nbsp;customerId,
                         <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item,
                         <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)
                           throws java.lang.Exception</pre>
<div class="block">If options is set to null, this method is identical to addToBasket(). Otherwise the
 functionality differs depending on the combination of options set.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd><dd><code>customerId</code> - </dd><dd><code>item</code> - </dd><dd><code>options</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns the id of the newly created Basket object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="addToBasket(java.lang.String, int, com.konakart.appif.BasketIf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addToBasket</h4>
<pre>int&nbsp;addToBasket(java.lang.String&nbsp;sessionId,
              int&nbsp;customerId,
              <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)
                throws java.lang.Exception</pre>
<div class="block">Determines the customerId to use and calls the private method with the customerId.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd><dd><code>customerId</code> - </dd><dd><code>item</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns the id of the newly created Basket object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="findOptionInProduct(com.konakart.appif.ProductIf, com.konakart.app.Option)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findOptionInProduct</h4>
<pre><a href="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</a>&nbsp;findOptionInProduct(<a href="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</a>&nbsp;p,
                         <a href="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</a>&nbsp;o)
                           throws com.konakart.app.KKException</pre>
<div class="block">The basket object must have a populated product object with options. The option passed in as
 a parameter is only partially populated so we try to find it in the array of options of the
 product and return the fully populated one.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>p</code> - </dd><dd><code>o</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Option</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>com.konakart.app.KKException</code></dd></dl>
</li>
</ul>
<a name="updateBasket(java.lang.String, int, com.konakart.appif.BasketIf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateBasket</h4>
<pre>void&nbsp;updateBasket(java.lang.String&nbsp;sessionId,
                int&nbsp;customerId,
                <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)
                  throws com.konakart.app.KKException,
                         com.workingdogs.village.DataSetException,
                         java.lang.Exception</pre>
<div class="block">If the sessionId is null, we check the customerId to ensure that it is negative. If it is
 negative, this means that it is a non registered customer or a customer that hasn't logged in
 yet and so there is no customer mapped to the session id. Otherwise we ensure that the
 sessionId is valid and that it points to the customerId passed in as a parameter.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd><dd><code>customerId</code> - </dd><dd><code>item</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
<dd><code>com.workingdogs.village.DataSetException</code></dd>
<dd><code>com.konakart.app.KKException</code></dd></dl>
</li>
</ul>
<a name="updateBasketWithOptions(java.lang.String, int, com.konakart.appif.BasketIf, com.konakart.appif.AddToBasketOptionsIf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateBasketWithOptions</h4>
<pre>void&nbsp;updateBasketWithOptions(java.lang.String&nbsp;sessionId,
                           int&nbsp;customerId,
                           <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item,
                           <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)
                             throws com.konakart.app.KKException,
                                    com.workingdogs.village.DataSetException,
                                    java.lang.Exception</pre>
<div class="block">If the sessionId is null, we check the customerId to ensure that it is negative. If it is
 negative, this means that it is a non registered customer or a customer that hasn't logged in
 yet and so there is no customer mapped to the session id. Otherwise we ensure that the
 sessionId is valid and that it points to the customerId passed in as a parameter.
 
 If options is set to null, this method is identical to updateBasket(). Otherwise the
 functionality differs depending on the combination of options set.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd><dd><code>customerId</code> - </dd><dd><code>item</code> - </dd><dd><code>options</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
<dd><code>com.workingdogs.village.DataSetException</code></dd>
<dd><code>com.konakart.app.KKException</code></dd></dl>
</li>
</ul>
<a name="removeBasketItemsPerCustomer(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeBasketItemsPerCustomer</h4>
<pre>void&nbsp;removeBasketItemsPerCustomer(java.lang.String&nbsp;sessionId,
                                int&nbsp;customerId)
                                  throws java.lang.Exception</pre>
<div class="block">We determine which customerId to use and then delete all basket items that exist for this
 customer by calling the private method.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd><dd><code>customerId</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="removeFromBasket(java.lang.String, int, com.konakart.appif.BasketIf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeFromBasket</h4>
<pre>void&nbsp;removeFromBasket(java.lang.String&nbsp;sessionId,
                    int&nbsp;customerId,
                    <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)
                      throws java.lang.Exception</pre>
<div class="block">We must remove the customers_basket record and any associated customers_basket_attributes
 records.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd><dd><code>customerId</code> - </dd><dd><code>item</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="createEncodedProduct(int, com.konakart.appif.OptionIf[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createEncodedProduct</h4>
<pre>java.lang.String&nbsp;createEncodedProduct(int&nbsp;productId,
                                    <a href="../../../com/konakart/appif/OptionIf.html" title="interface in com.konakart.appif">OptionIf</a>[]&nbsp;opts)</pre>
<div class="block">Create the encoded product The customers_basket table contains a products_id field which is
 encoded like this : 1{3}6{4}3 which means product of id==1 with product_options of id==3 and
 product_options_values of id==6 followed by product_options of id==4 and
 product_options_values of id==3. The order is very important (product option ids increasing)
 since this the encoded product has to match regardless of the ordering of the options in the
 ops array.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>productId</code> - </dd><dd><code>opts</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>The encoded string</dd></dl>
</li>
</ul>
<a name="mergeBaskets(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeBaskets</h4>
<pre>void&nbsp;mergeBaskets(java.lang.String&nbsp;sessionId,
                int&nbsp;customerFromId)
                  throws java.lang.Exception</pre>
<div class="block">Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId. This is done when a customer logs in, to move his temporary basket to his
 permanent basket.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd><dd><code>customerFromId</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="mergeBasketsWithOptions(java.lang.String, int, com.konakart.appif.AddToBasketOptionsIf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeBasketsWithOptions</h4>
<pre>void&nbsp;mergeBasketsWithOptions(java.lang.String&nbsp;sessionId,
                           int&nbsp;customerFromId,
                           <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)
                             throws java.lang.Exception</pre>
<div class="block">Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId. This is done when a customer logs in, to move his temporary basket to his
 permanent basket.
 
 If options is set to null then this call is identical to mergeBaskets(). The options may
 determine from where we read the price and quantity of the basket items.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd><dd><code>customerFromId</code> - </dd><dd><code>options</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="updateBasketWithStockInfo(com.konakart.appif.BasketIf[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateBasketWithStockInfo</h4>
<pre><a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]&nbsp;updateBasketWithStockInfo(<a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>[]&nbsp;basketItems)
                                   throws java.lang.Exception</pre>
<div class="block">Receives an array of basket items and updates each one with the current stock level. This is
 a useful check to make before checking out, to see whether the stock level is sufficient.
 
 If the product or any of the product attributes of a basket item no longer exist, then that
 basket item is not returned. This means that the size of the returned array may be smaller
 than the size of the array passed in as a parameter.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>basketItems</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns an array of basket items with updated stock level</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="updateBasketWithStockInfoWithOptions(com.konakart.appif.BasketIf[], com.konakart.appif.AddToBasketOptionsIf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateBasketWithStockInfoWithOptions</h4>
<pre><a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]&nbsp;updateBasketWithStockInfoWithOptions(<a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>[]&nbsp;basketItems,
                                            <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)
                                              throws java.lang.Exception</pre>
<div class="block">Receives an array of basket items and updates each one with the current stock level. This is
 a useful check to make before checking out, to see whether the stock level is sufficient.
 
 If the product or any of the product attributes of a basket item no longer exist, then that
 basket item is not returned. This means that the size of the returned array may be smaller
 than the size of the array passed in as a parameter.
 
 If options is set to null, this method is identical to updateBasketWithStockInfo(). Otherwise
 the functionality differs depending on the combination of options set.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>basketItems</code> - </dd><dd><code>options</code> - An object containing options for the method. It may be set to null.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns an array of basket items with updated stock level</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="populateOptsForBasketItem(com.konakart.app.Basket, int, int, com.konakart.appif.AddToBasketOptionsIf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>populateOptsForBasketItem</h4>
<pre>void&nbsp;populateOptsForBasketItem(<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;item,
                             int&nbsp;priceId,
                             int&nbsp;languageId,
                             <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;a2bOptions)
                               throws java.lang.Exception</pre>
<div class="block">The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6. We have to read this encoded field called encodedProduct and
 create an array of Options and then set the opts attribute and the productId attribute of the
 Basket object passed in.<br>
 An exception is thrown if the product options no longer exist.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>item</code> - </dd><dd><code>priceId</code> - </dd><dd><code>languageId</code> - </dd><dd><code>a2bOptions</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="getOptsForBasketItem(com.konakart.app.Basket, int, int, com.konakart.appif.AddToBasketOptionsIf)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getOptsForBasketItem</h4>
<pre><a href="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</a>[]&nbsp;getOptsForBasketItem(<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;item,
                            int&nbsp;priceId,
                            int&nbsp;languageId,
                            <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;a2bOptions)
                              throws java.lang.Exception</pre>
<div class="block">The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6. We have to read this encoded field called encodedProduct and
 create an array of Options and then set the productId attribute of the Basket object passed
 in.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>item</code> - </dd><dd><code>priceId</code> - </dd><dd><code>languageId</code> - </dd><dd><code>a2bOptions</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns an array of options</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/konakart/blif/AdminEngineMgrIf.html" title="interface in com.konakart.blif"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/konakart/blif/BillingMgrIf.html" title="interface in com.konakart.blif"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/konakart/blif/BasketMgrIf.html" target="_top">Frames</a></li>
<li><a href="BasketMgrIf.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &copy; 2011 DS Data Systems UK Ltd.</small></p>
</body>
</html>
