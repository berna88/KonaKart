<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jan 31 11:20:39 GMT 2018 -->
<title>SecurityMgrIf (KonaKart Server Engine API Documentation)</title>
<meta name="date" content="2018-01-31">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="SecurityMgrIf (KonaKart Server Engine API Documentation)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/konakart/blif/RewardPointMgrIf.html" title="interface in com.konakart.blif"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/konakart/blif/ShippingMgrIf.html" title="interface in com.konakart.blif"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/konakart/blif/SecurityMgrIf.html" target="_top">Frames</a></li>
<li><a href="SecurityMgrIf.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.konakart.blif</div>
<h2 title="Interface SecurityMgrIf" class="title">Interface SecurityMgrIf</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../com/konakart/bl/SecurityMgr.html" title="class in com.konakart.bl">SecurityMgr</a>, <a href="../../../com/konakart/bl/SecurityMgrEE.html" title="class in com.konakart.bl">SecurityMgrEE</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">SecurityMgrIf</span></pre>
<div class="block">SecurityMgrIf
 
 Interface which an implementation of this manager must adhere to.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#addCustomDataToSession(java.lang.String,%20java.lang.String,%20int)">addCustomDataToSession</a></strong>(java.lang.String&nbsp;sessionId,
                      java.lang.String&nbsp;data,
                      int&nbsp;position)</code>
<div class="block">A sessionId is created when a customer logs in to KonaKart using the login() API call.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#changePassword(java.lang.String,%20java.lang.String,%20java.lang.String)">changePassword</a></strong>(java.lang.String&nbsp;sessionId,
              java.lang.String&nbsp;currentPassword,
              java.lang.String&nbsp;newPassword)</code>
<div class="block">The method ensures that the current password is correct, and then changes it with the new
 password.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#checkAdminSession(java.lang.String)">checkAdminSession</a></strong>(java.lang.String&nbsp;adminSession)</code>
<div class="block">If the session of the admin user is valid and refers to an administrator then the id of the
 admin user is returned.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#checkFileAccess(java.lang.String)">checkFileAccess</a></strong>(java.lang.String&nbsp;fileName)</code>
<div class="block">Check that we allow access to this location.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#checkSession(java.lang.String)">checkSession</a></strong>(java.lang.String&nbsp;sessionId)</code>
<div class="block">The given sessionId is checked to see whether it exists and whether it is has timed out.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#enableCustomer(java.lang.String)">enableCustomer</a></strong>(java.lang.String&nbsp;secretKey)</code>
<div class="block">This method retrieves the SSO token using the Secret Key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#encrypt(java.lang.String)">encrypt</a></strong>(java.lang.String&nbsp;password)</code>
<div class="block">Returns an encrypted password.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/ExternalLoginResult.html" title="class in com.konakart.app">ExternalLoginResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#externalLogin(com.konakart.appif.ExternalLoginInputIf)">externalLogin</a></strong>(<a href="../../../com/konakart/appif/ExternalLoginInputIf.html" title="interface in com.konakart.appif">ExternalLoginInputIf</a>&nbsp;loginInfo)</code>
<div class="block">Used for logging in customers using a mechanism outside of KonaKart such as social login
 using Facebook.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#getCustomDataFromSession(java.lang.String,%20int)">getCustomDataFromSession</a></strong>(java.lang.String&nbsp;sessionId,
                        int&nbsp;position)</code>
<div class="block">A sessionId is created when a customer logs in to KonaKart using the login() API call.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#getRandomPassword(int)">getRandomPassword</a></strong>(int&nbsp;length)</code>
<div class="block">If length == 0, the configuration value ENTRY_PASSWORD_MIN_LENGTH is used.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/konakart/appif/SSOTokenIf.html" title="interface in com.konakart.appif">SSOTokenIf</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#getSSOToken(java.lang.String,%20boolean)">getSSOToken</a></strong>(java.lang.String&nbsp;secretKey,
           boolean&nbsp;deleteToken)</code>
<div class="block">Returns an SSOToken object for the secretKey (UUID).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#getTimeInSecs()">getTimeInSecs</a></strong>()</code>
<div class="block">Utility method to return the current time in seconds</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#login(int)">login</a></strong>(int&nbsp;customerId)</code>
<div class="block">Login method that assumes that all checks have already been taken.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#login(java.lang.String,%20java.lang.String)">login</a></strong>(java.lang.String&nbsp;emailAddr,
     java.lang.String&nbsp;password)</code>
<div class="block">Returns a session id if successful.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#loginByAdmin(java.lang.String,%20int)">loginByAdmin</a></strong>(java.lang.String&nbsp;adminSession,
            int&nbsp;customerId)</code>
<div class="block">Used to log in to the application as a customer by an Administrator.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/LoginResult.html" title="class in com.konakart.app">LoginResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#loginWithOptions(com.konakart.appif.LoginInputIf)">loginWithOptions</a></strong>(<a href="../../../com/konakart/appif/LoginInputIf.html" title="interface in com.konakart.appif">LoginInputIf</a>&nbsp;input)</code>
<div class="block">Returns a LoginResult object containing the result of the login.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#logout(java.lang.String)">logout</a></strong>(java.lang.String&nbsp;sessionId)</code>
<div class="block">Logout the user with the specified session Id.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#saveSSOToken(com.konakart.appif.SSOTokenIf)">saveSSOToken</a></strong>(<a href="../../../com/konakart/appif/SSOTokenIf.html" title="interface in com.konakart.appif">SSOTokenIf</a>&nbsp;token)</code>
<div class="block">Saves the SSOToken in the database and returns a UUID secret key identifier.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#sendNewPassword(java.lang.String,%20java.lang.String,%20java.lang.String)">sendNewPassword</a></strong>(java.lang.String&nbsp;emailAddr,
               java.lang.String&nbsp;subject,
               java.lang.String&nbsp;countryCode)</code>
<div class="block"><strong>Deprecated.</strong>&nbsp;&nbsp;</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/appif/EmailIf.html" title="interface in com.konakart.appif">EmailIf</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#sendNewPassword1(java.lang.String,%20com.konakart.appif.EmailOptionsIf)">sendNewPassword1</a></strong>(java.lang.String&nbsp;emailAddr,
                <a href="../../../com/konakart/appif/EmailOptionsIf.html" title="interface in com.konakart.appif">EmailOptionsIf</a>&nbsp;options)</code>
<div class="block">If a customer exists with the email address passed in as a parameter, then a new password is
 generated and sent to the customer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#setNewPassword(java.lang.String,%20java.lang.String,%20int,%20java.lang.String)">setNewPassword</a></strong>(java.lang.String&nbsp;adminSession,
              java.lang.String&nbsp;customerEmailAddr,
              int&nbsp;customerId,
              java.lang.String&nbsp;newPassword)</code>
<div class="block">Used to change the password of a customer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/konakart/blif/SecurityMgrIf.html#validatePassword(java.lang.String,%20java.lang.String)">validatePassword</a></strong>(java.lang.String&nbsp;sessionId,
                java.lang.String&nbsp;password)</code>
<div class="block">This method validates the password of a logged in customer and can be used to force the
 customer to enter his password before allowing certain actions like the modification of the
 customer's email address.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="login(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>login</h4>
<pre>java.lang.String&nbsp;login(java.lang.String&nbsp;emailAddr,
                     java.lang.String&nbsp;password)
                       throws java.lang.Exception</pre>
<div class="block">Returns a session id if successful. Otherwise returns null.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>emailAddr</code> - </dd><dd><code>password</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>SessionId if OK. Otherwise null.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="loginWithOptions(com.konakart.appif.LoginInputIf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loginWithOptions</h4>
<pre><a href="../../../com/konakart/app/LoginResult.html" title="class in com.konakart.app">LoginResult</a>&nbsp;loginWithOptions(<a href="../../../com/konakart/appif/LoginInputIf.html" title="interface in com.konakart.appif">LoginInputIf</a>&nbsp;input)
                             throws java.lang.Exception</pre>
<div class="block">Returns a LoginResult object containing the result of the login. It returns more information
 than the login() API call as to why the login may have failed and whether the password needs
 to be changed.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>input</code> - LoginInput object containing the username and password</dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns a LoginResult object containing the result of the login.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="login(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>login</h4>
<pre>java.lang.String&nbsp;login(int&nbsp;customerId)
                       throws java.lang.Exception</pre>
<div class="block">Login method that assumes that all checks have already been taken. If we get to this point,
 the credentials have matched and so we need to create a random session id, 16 bytes long.
 
 Since duplicate session ids may be created, we retry a few times to create a unique session
 id.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>customerId</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns the sessionId</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="logout(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logout</h4>
<pre>void&nbsp;logout(java.lang.String&nbsp;sessionId)
            throws org.apache.torque.TorqueException,
                   com.workingdogs.village.DataSetException,
                   com.konakart.app.KKException</pre>
<div class="block">Logout the user with the specified session Id. First we check that the sessionId is valid.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>com.workingdogs.village.DataSetException</code></dd>
<dd><code>org.apache.torque.TorqueException</code></dd>
<dd><code>com.konakart.app.KKException</code></dd></dl>
</li>
</ul>
<a name="getTimeInSecs()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTimeInSecs</h4>
<pre>int&nbsp;getTimeInSecs()</pre>
<div class="block">Utility method to return the current time in seconds</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Returns the time</dd></dl>
</li>
</ul>
<a name="checkSession(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkSession</h4>
<pre>int&nbsp;checkSession(java.lang.String&nbsp;sessionId)
                 throws org.apache.torque.TorqueException,
                        com.workingdogs.village.DataSetException,
                        com.konakart.app.KKException</pre>
<div class="block">The given sessionId is checked to see whether it exists and whether it is has timed out. If
 it is valid, the expiry attribute is updated.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns customerId</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>org.apache.torque.TorqueException</code></dd>
<dd><code>com.workingdogs.village.DataSetException</code></dd>
<dd><code>com.konakart.app.KKException</code></dd></dl>
</li>
</ul>
<a name="encrypt(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encrypt</h4>
<pre>java.lang.String&nbsp;encrypt(java.lang.String&nbsp;password)
                         throws java.security.NoSuchAlgorithmException</pre>
<div class="block">Returns an encrypted password.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>password</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns an encrypted password</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.security.NoSuchAlgorithmException</code></dd></dl>
</li>
</ul>
<a name="changePassword(java.lang.String, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changePassword</h4>
<pre>void&nbsp;changePassword(java.lang.String&nbsp;sessionId,
                  java.lang.String&nbsp;currentPassword,
                  java.lang.String&nbsp;newPassword)
                    throws java.lang.Exception</pre>
<div class="block">The method ensures that the current password is correct, and then changes it with the new
 password. It allows any password length and relies on the application to ensure that a
 minimum length is guaranteed.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd><dd><code>currentPassword</code> - </dd><dd><code>newPassword</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="getRandomPassword(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRandomPassword</h4>
<pre>java.lang.String&nbsp;getRandomPassword(int&nbsp;length)
                                   throws java.lang.Exception</pre>
<div class="block">If length == 0, the configuration value ENTRY_PASSWORD_MIN_LENGTH is used.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>length</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns a random password</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="sendNewPassword(java.lang.String, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendNewPassword</h4>
<pre>@Deprecated
void&nbsp;sendNewPassword(java.lang.String&nbsp;emailAddr,
                              java.lang.String&nbsp;subject,
                              java.lang.String&nbsp;countryCode)
                     throws java.security.NoSuchAlgorithmException,
                            java.lang.Exception</pre>
<div class="block"><span class="strong">Deprecated.</span>&nbsp;<i></i></div>
<div class="block">If a customer exists with the email address passed in as a parameter, then a new password is
 generated and sent to the customer.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>emailAddr</code> - </dd><dd><code>subject</code> - </dd><dd><code>countryCode</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.security.NoSuchAlgorithmException</code></dd>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="sendNewPassword1(java.lang.String, com.konakart.appif.EmailOptionsIf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendNewPassword1</h4>
<pre><a href="../../../com/konakart/appif/EmailIf.html" title="interface in com.konakart.appif">EmailIf</a>&nbsp;sendNewPassword1(java.lang.String&nbsp;emailAddr,
                       <a href="../../../com/konakart/appif/EmailOptionsIf.html" title="interface in com.konakart.appif">EmailOptionsIf</a>&nbsp;options)
                         throws java.security.NoSuchAlgorithmException,
                                java.lang.Exception</pre>
<div class="block">If a customer exists with the email address passed in as a parameter, then a new password is
 generated and sent to the customer.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>emailAddr</code> - </dd><dd><code>options</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>An Email object containing only the email address specified</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.security.NoSuchAlgorithmException</code></dd>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="loginByAdmin(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loginByAdmin</h4>
<pre>java.lang.String&nbsp;loginByAdmin(java.lang.String&nbsp;adminSession,
                            int&nbsp;customerId)
                              throws java.lang.Exception</pre>
<div class="block">Used to log in to the application as a customer by an Administrator. This is useful for Call
 Center type applications where the Call Center person can log into the application as the
 customer without requiring the customer's credentials, in order to perform some action on
 behalf of the customer.
 
 The adminSession must contain the session of a logged in Administrator User. The customerId
 must contain the Id of the customer to login as.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>adminSession</code> - The session of a logged in administrator user</dd><dd><code>customerId</code> - The id of the customer to login as</dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns the sessionId for the customer's session</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="addCustomDataToSession(java.lang.String, java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addCustomDataToSession</h4>
<pre>void&nbsp;addCustomDataToSession(java.lang.String&nbsp;sessionId,
                          java.lang.String&nbsp;data,
                          int&nbsp;position)
                            throws org.apache.torque.TorqueException,
                                   com.konakart.app.KKException</pre>
<div class="block">A sessionId is created when a customer logs in to KonaKart using the login() API call. This
 sessionId is persisted in the database in a table which has 5 custom fields. This method
 allows you to store data in these custom fields which can later be retrieved by using the
 sessionId as the key.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - The sessionId</dd><dd><code>data</code> - The data to be saved</dd><dd><code>position</code> - This must be in the range of 1-5 to identify custom1 to custom5</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>org.apache.torque.TorqueException</code></dd>
<dd><code>com.konakart.app.KKException</code></dd></dl>
</li>
</ul>
<a name="getCustomDataFromSession(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCustomDataFromSession</h4>
<pre>java.lang.String&nbsp;getCustomDataFromSession(java.lang.String&nbsp;sessionId,
                                        int&nbsp;position)
                                          throws com.konakart.app.KKException,
                                                 org.apache.torque.TorqueException,
                                                 com.workingdogs.village.DataSetException</pre>
<div class="block">A sessionId is created when a customer logs in to KonaKart using the login() API call. This
 sessionId is persisted in the database in a table which has 5 custom fields. This method
 allows you to retrieve the data in these custom fields by passing the sessionId as the key
 and a pointer to identify the custom field to be used.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - The sessionId</dd><dd><code>position</code> - This must be in the range of 1-5 to identify custom1 to custom5</dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns the custom data</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>com.konakart.app.KKException</code></dd>
<dd><code>org.apache.torque.TorqueException</code></dd>
<dd><code>com.workingdogs.village.DataSetException</code></dd></dl>
</li>
</ul>
<a name="saveSSOToken(com.konakart.appif.SSOTokenIf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveSSOToken</h4>
<pre>java.lang.String&nbsp;saveSSOToken(<a href="../../../com/konakart/appif/SSOTokenIf.html" title="interface in com.konakart.appif">SSOTokenIf</a>&nbsp;token)
                              throws java.lang.Exception</pre>
<div class="block">Saves the SSOToken in the database and returns a UUID secret key identifier.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>token</code> - The SSO token to be saved</dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns a UUID secret key identifier for the token</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="getSSOToken(java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSSOToken</h4>
<pre><a href="../../../com/konakart/appif/SSOTokenIf.html" title="interface in com.konakart.appif">SSOTokenIf</a>&nbsp;getSSOToken(java.lang.String&nbsp;secretKey,
                     boolean&nbsp;deleteToken)
                       throws org.apache.torque.TorqueException,
                              com.workingdogs.village.DataSetException</pre>
<div class="block">Returns an SSOToken object for the secretKey (UUID). Null is returned if no token is found.
 If the <code>deleteToken</code> parameter is set to true, the token is deleted from the
 database after having been read.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>secretKey</code> - The UUID secretKey used to identify the token</dd><dd><code>deleteToken</code> - The token is deleted from the database after being read</dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns an SSOToken</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>org.apache.torque.TorqueException</code></dd>
<dd><code>com.workingdogs.village.DataSetException</code></dd></dl>
</li>
</ul>
<a name="enableCustomer(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enableCustomer</h4>
<pre>void&nbsp;enableCustomer(java.lang.String&nbsp;secretKey)
                    throws java.lang.Exception</pre>
<div class="block">This method retrieves the SSO token using the Secret Key. Once read, the token is deleted.
 The customer id read from the token is used to identify and enable the customer. An exception
 is thrown if a customer doesn't exist for the customer id found in the token.
 <p>
 If the <code>custom1</code> attribute of the SSO token object is set to <code>true</code>
 then the <code>emailVerified</code> attribute of the customer is also set.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>secretKey</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="validatePassword(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validatePassword</h4>
<pre>boolean&nbsp;validatePassword(java.lang.String&nbsp;sessionId,
                       java.lang.String&nbsp;password)
                         throws java.lang.Exception</pre>
<div class="block">This method validates the password of a logged in customer and can be used to force the
 customer to enter his password before allowing certain actions like the modification of the
 customer's email address.
 <p>
 The method returns true if the password validates against the session. If either the session
 is invalid or the password and session don't match, then the method returns false.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - </dd><dd><code>password</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns true if the password validates</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="externalLogin(com.konakart.appif.ExternalLoginInputIf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>externalLogin</h4>
<pre><a href="../../../com/konakart/app/ExternalLoginResult.html" title="class in com.konakart.app">ExternalLoginResult</a>&nbsp;externalLogin(<a href="../../../com/konakart/appif/ExternalLoginInputIf.html" title="interface in com.konakart.appif">ExternalLoginInputIf</a>&nbsp;loginInfo)
                                  throws java.lang.Exception</pre>
<div class="block">Used for logging in customers using a mechanism outside of KonaKart such as social login
 using Facebook. The ExternalLoginInput parameter contains the class name of the module that
 will perform the login. This module ( which implements
 <code>com.konakart.bl.modules.others.ExternalLoginInterface</code>) must be present in the
 system and must have been installed and activated.
 <p>
 The function of this method is to instantiate the module, to call its
 <code>externalLogin</code> method and to return the result from the module which should
 contain a KonaKart sessionId if the login was successful.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>loginInfo</code> - Contains the information required by the module to perform the login</dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns an ExternalLoginResult method containing a KonaKart sessionId if the login
         was successful</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="checkAdminSession(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkAdminSession</h4>
<pre>int&nbsp;checkAdminSession(java.lang.String&nbsp;adminSession)
                      throws java.lang.Exception</pre>
<div class="block">If the session of the admin user is valid and refers to an administrator then the id of the
 admin user is returned. Otherwise an exception is thrown.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>adminSession</code> - Session of the admin user</dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns the id of the admin user</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="setNewPassword(java.lang.String, java.lang.String, int, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNewPassword</h4>
<pre>void&nbsp;setNewPassword(java.lang.String&nbsp;adminSession,
                  java.lang.String&nbsp;customerEmailAddr,
                  int&nbsp;customerId,
                  java.lang.String&nbsp;newPassword)
                    throws java.lang.Exception</pre>
<div class="block">Used to change the password of a customer.
 <p>
 For security purposes, the session id of a KonaKart administrator must be passed in as a
 parameter. This session id is checked to ensure that it applies to a logged in administrator.
 <p>
 If <code>customerEmailAddr</code> is set then the customer is looked up from the email
 address. Otherwise the customerId is used to look up the customer. If the customer isn't
 found, an exception is thrown.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>adminSession</code> - The session id of an administrator</dd><dd><code>customerEmailAddr</code> - The email address of the customer</dd><dd><code>customerId</code> - The id of the customer. Only used if customerEmailAddr is null</dd><dd><code>newPassword</code> - The new password</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="checkFileAccess(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>checkFileAccess</h4>
<pre>void&nbsp;checkFileAccess(java.lang.String&nbsp;fileName)
                     throws java.lang.Exception</pre>
<div class="block">Check that we allow access to this location. Permitted locations are specified in the
 konakart.properties file</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fileName</code> - the file to be accessed (read or written)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if access to the filepath isn't permitted an Exception is thrown otherwise the
             method returns successfully.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/konakart/blif/RewardPointMgrIf.html" title="interface in com.konakart.blif"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/konakart/blif/ShippingMgrIf.html" title="interface in com.konakart.blif"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/konakart/blif/SecurityMgrIf.html" target="_top">Frames</a></li>
<li><a href="SecurityMgrIf.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &copy; 2011 DS Data Systems UK Ltd.</small></p>
</body>
</html>
